<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Geteam : My Page</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script type="text/javascript">
    function chk_value(id, value) {
      let target = document.getElementById(id);
      let v = 1 - value;
      target.setAttribute("value", v);
      target.setAttribute("checked");
    }

    function isNumber(s) {
      s += ''; // 문자열로 변환
      s = s.replace(/^\s*|\s*$/g, ''); // 좌우 공백 제거
      if (s == '' || isNaN(s)) return false;
      return true;
    }

    function infoChk() {
      let infoSet = document.frm_change;
      let nameResult = document.getElementById("nameResult");
      let numResult = document.getElementById("modifySNumResult");
      let intersResult = document.getElementById("interestResult");
      let modifyProfileResult = document.getElementById("modifyProfileResult");

      if (infoSet.modifyName.value == "") {
        nameResult.innerHTML = "이름을 입력해주세요";
        infoSet.modifyName.focus();
      } else if (infoSet.modifySNum.value == "" || !(isNumber(infoSet.modifySNum.value))) {
        nameResult.innerHTML = "";
        numResult.innerHTML = "학번을 입력해주세요";
        infoSet.modifySNum.focus();
      } else if (infoSet.modifyInterest1.value == "" || infoSet.modifyInterest2.value == "" || infoSet.modifyInterest3.value == "") {
        numResult.innerHTML = "";
        intersResult.innerHTML = "흥미로운 Topic들을 입력해주세요";
        infoSet.modifyInterest1.focus();
      } else if (infoSet.modifyProfile.value == "") {
        intersResult.innerHTML = "";
        modifyProfileResult.innerHTML = "자기소개를 입력해주세요";
        infoSet.modifyProfile.focus();
      } else {
        infoSet.submit();
      }
    }

    function pwdChk() {
      let pwdSet = document.frm_pwd;
      let oldPwd = document.getElementById("oldPwd");
      let pwdResult = document.getElementById("newPwdResult");
      let pwdckResult = document.getElementById("newPwdCheckResult");

      if (pwdSet.oldPwd.value == "") {
        pwdSet.oldPwd.innerHTML = "기존 비밀번호를 입력하세요!";
        pwdSet.oldPwd.focus();
      } else if (!(pwdSet.newPwd.value == pwdSet.newPwdCheck.value)) {
        pwdSet.newPwd.innerHTML = "";
        pwdckResult.innerHTML = "비밀번호와 확인 문자가 일치하지 않습니다";
        pwdSet.newPwd.focus();
      } else {
        pwdSet.submit();
      }
    }
  </script>

  <script type="text/javascript">
    window.onload = startNone;

    function startNone() {
      let start_item1 = document.getElementById('con01_sub');
      let start_item2 = document.getElementById('con02_sub');
      let start_item3 = document.getElementById('con03_sub');
      let start_item4 = document.getElementById('con04_sub');

      start_item1.style.display = "none";
      start_item2.style.display = "none";
      start_item3.style.display = "none";
      start_item4.style.display = "none";
    }

    function item_chk1() {
      let item1 = document.getElementById('con01_sub');
      if (item1.style.display == "none") {
        item1.style.display = "block";
      } else {
        item1.style.display = "none";
      }
    }

    function item_chk2() {
      let item2 = document.getElementById('con02_sub');
      if (item2.style.display == "none") {
        item2.style.display = "block";
      } else {
        item2.style.display = "none";
      }
    }

    function item_chk3() {
      let item1 = document.getElementById('con03_sub');
      if (item1.style.display == "none") {
        item1.style.display = "block";
      } else {
        item1.style.display = "none";
      }
    }

    function item_chk4() {
      let item1 = document.getElementById('con04_sub');
      if (item1.style.display == "none") {
        item1.style.display = "block";
      } else {
        item1.style.display = "none";
      }
    }
  </script>
</head>

<body data-spy="scroll" data-target=".navbar-collapse">
  <div class="culmn">
    <% include header %>
    <div class="container m-top-100" style="padding-bottom: 100px;">
      <div class="separator_auto"></div>
      <div class="col-md-12">
        <div class="page_title text-center">
          <h2>My Page</h2>
          <div class="separator_auto"></div>
        </div>
      </div>

      <div class="col-md-10 col-md-offset-1">
        <ul class="mypage">
          <div class="col-md-6" id="con01" style="cursor: pointer;" onClick="item_chk1()">
            <li class="mypage_item">
              <div class="ab_head" style="display: block;">
                <div class="ab_head_icon">
                  <i class="icofont icofont-letter"></i>
                </div>
              </div>
              <span class="title">신청 관리</span>
              <span class="content">내가 한 신청, 받은 신청 관리</span>
            </li>
          </div>

          <div class="col-md-12" id="con01_sub">
            <li class="mypage_subitem">
              <div class="ab_head" style="display: block;">
              </div>
              <span style="font-size: 2em; font-weight: 600; display: block; margin-bottom: 30px;">신청 관리</span>
              <span class="content">내가 한 신청, 받은 신청 관리</span>
            </li>
          </div>

          <div class="col-md-6" id="con03" style="cursor: pointer;" onClick="item_chk3()">
            <li class="mypage_item">
              <div class="ab_head" style="display: block;">
                <div class="ab_head_icon">
                  <i class="icofont icofont-page"></i>
                </div>
              </div>
              <span class="title">작성글 관리</span>
              <span class="content">스터디, 공모전 작성글을 각각의 탭으로 관리</span>
            </li>
          </div>

          <div class="col-md-12" id="con03_sub">
            <li class="mypage_subitem">
              <div class="ab_head" style="display: block;">
              </div>
              <span style="font-size: 2em; font-weight: 600; display: block; margin-bottom: 30px;">작성글 관리</span>
              <div role="tabpanel1">

                <ul class="nav nav-tabs" role="tablist" style="font-size: 16px;">
                  <li role="presentation" class="active"><a href="#study" aria-controls="study" role="tab"
                    data-toggle="tab"><span style="color: #efdc05;">스터디</span></a></li>
                  <li role="presentation"><a href="#contest" aria-controls="contest" role="tab" data-toggle="tab"><span
                    style="color: #efdc05;">공모전</span></a></li>
                </ul>
                <div class="tab-content">
                  <div role="tabpanel" class="tab-pane fade in active" id="study">
                    <% // include item_list // list_study %>
                  </div>
                  <div role="tabpanel" class="tab-pane fade in active" id="contest">
                    <% // include item_list // list_contest %>
                  </div>
                </div>
              </div>
            </li>
          </div>

          <div class="col-md-6" id="con02" style="cursor: pointer;" onClick="item_chk2()">
            <li class="mypage_item">
              <div class="ab_head" style="display: block;">
                <div class="ab_head_icon">
                  <i class="icofont icofont-alarm"></i>
                </div>
              </div>
              <span class="title">알림 관리</span>
              <span class="content">내가 받을 알림 관리</span>
            </li>
          </div>
          <div class="col-md-12" id="con02_sub">
          
            <li class="mypage_subitem">
              <div class="ab_head" style="display: block;">
              </div>
              <span style="font-size: 2em; font-weight: 600; display: block; margin-bottom: 30px;">알림 관리</span>

              <div>
                
              </div>
              
              <input type="checkbox" checked data-toggle="toggle" data-size="lg">
              <input type="checkbox" checked data-toggle="toggle">
              <input type="checkbox" checked data-toggle="toggle" data-size="sm">
              <input type="checkbox" checked data-toggle="toggle" data-size="xs">

              <div class="checkbox" style="margin-top: 40px; text-align: left;">
                <span class="text_alarm">신청하기 관련 알람</span>
                <input type="checkbox" checked data-toggle="toggle" data-onstyle="outline-primary" data-offstyle="outline-secondary">
              </div>

              <div class="checkbox" style="margin-top: 40px; text-align: left;">
                <span class="text_alarm">신청받기 관련 알람</span>
                <label class="switch">
                  <input type="checkbox" checked data-toggle="toggle" data-onstyle="outline-primary" data-offstyle="outline-secondary">
                </label>
              </div>

            </li>
          </div>

          <div class="col-md-6" id="con04" style="cursor: pointer;" onClick="item_chk4()">
            <li class="mypage_item">
              <div class="ab_head" style="display: block;">
                <div class="ab_head_icon">
                  <i class="icofont icofont-automation"></i>
                </div>
              </div>
              <span class="title">개인정보 관리</span>
              <span class="content">개인정보 수정, 비밀번호 변경, 회원 탈퇴</span>
            </li>
          </div>

          <div class="col-md-12" id="con04_sub">
            <li class="mypage_subitem">

              <span style="font-size: 2em; font-weight: 600; display: block; margin-bottom: 30px;">개인정보 관리</span>

              <div role="tabpanel1">

                <ul class="nav nav-tabs" role="tablist" style="font-size: 16px;">
                  <li role="presentation" class="active"><a href="#sub1_1" aria-controls="sub1_1" role="tab"
                      data-toggle="tab"><span style="color: #efdc05;">개인정보 변경</span></a></li>
                  <li role="presentation"><a href="#sub1_2" aria-controls="sub1_2" role="tab" data-toggle="tab"><span
                        style="color: #efdc05;">비밀번호 변경</span></a></li>
                  <li role="presentation"><a href="#sub1_3" aria-controls="sub1_3" role="tab" data-toggle="tab"><span
                        style="color: #efdc05;">회원 탈퇴</span></a></li>
                </ul>

                <div class="tab-content">
                  <div role="tabpanel" class="tab-pane fade in active" id="sub1_1"
                    style="padding-left: 15%; padding-right: 15%;">

                    <form class="form_write" method="post" action="/mypage/info?_method=PATCH" name="frm_change"
                      style="margin-top: 40px;">
                      <label>
                        아이디
                        <input type="text" value="<%= info.id %>" disabled readonly>
                      </label>

                      <label>
                        이름
                        <input type="text" name="modifyName" value="<%= info.name %>">
                      </label>
                      <span id="nameResult" class="fail"></span>

                      <label>
                        학번
                        <input type="text" name="modifySNum" value="<%= info.sNum %>">
                      </label>
                      <span id="modifySNumResult" class="fail"></span>

                      <label>
                        <div>흥미있는 기술 / 공부주제</div>
                        <input type="text" name="modifyInterest1" placeholder="1" value="<%= info.interest1 %>"
                          style="display: inline-block; width: 30%;">
                        <input type="text" name="modifyInterest2" placeholder="2" value="<%= info.interest2 %>"
                          style="display: inline-block; width: 30%;">
                        <input type="text" name="modifyInterest3" placeholder="3" value="<%= info.interest3 %>"
                          style="display: inline-block; width: 30%;">
                      </label>
                      <span id="interestResult" class="fail"></span>

                      <label>
                        자기소개
                        <textarea name="modifyProfile"><%= info.profile %></textarea>
                      </label>
                      <span id="modifyProfileResult" class="fail"></span>

                      <button type="button" class="form-control btn btn-primary" onClick="infoChk()">개인정보 변경</button>
                    </form>

                  </div>

                  <div role="tabpanel" class="tab-pane fade" id="sub1_2" style="padding-left: 15%; padding-right: 15%;">

                    <form class="form_write" method="post" action="/mypage/pwd?_method=PATCH" name="frm_pwd" style="margin-top: 40px;">
                      <label>
                        기존 비밀번호
                        <input type="password" name="oldPwd" placeholder="기존 비밀번호">
                      </label>
                      <label>
                        새로운 비밀번호
                        <input type="password" name="newPwd" placeholder="새로운 비밀번호">
                      </label>
                      <label>
                        새로운 비밀번호 확인
                        <input type="password" name="newPwdCheck" placeholder="새로운 비밀번호 확인">
                      </label>
                      <span id="newPwdCheckResult" class="fail"></span>
                      <button type="button" onClick="pwdChk()" class="form-control btn btn-primary">비밀번호 변경</button>
                    </form>

                  </div>

                  <div role="tabpanel" class="tab-pane fade" id="sub1_3" style="padding-left: 15%; padding-right: 15%;">

                    <form class="form_write" method="post" action="/unregister?_method=DELETE" style="margin-top: 40px;">
                      <input type="submit" class="form-control btn btn-primary" value="회원 탈퇴" />
                    </form>

                  </div>
                </div>

              </div>

            </li>
        </ul>
      </div>
    </div>
    <% include footer %>
  </div> <!-- culmn -->
</body>

</html>